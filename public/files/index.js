let CardDeck = { "cards" : [
  {
    "color": "blue",
    "value": 0
  },
  {
    "color": "blue",
    "value": 1
  },
  {
    "color": "blue",
    "value": 2
  },
  {
    "color": "blue",
    "value": 3
  },
  {
    "color": "blue",
    "value": 4
  },
  {
    "color": "blue",
    "value": 5
  },
  {
    "color": "blue",
    "value": 6
  },
  {
    "color": "blue",
    "value": 7
  },
  {
    "color": "blue",
    "value": 8
  },
  {
    "color": "blue",
    "value": 9
  },
  {
    "color": "blue",
    "value": 1
  },
  {
    "color": "blue",
    "value": 2
  },
  {
    "color": "blue",
    "value": 3
  },
  {
    "color": "blue",
    "value": 4
  },
  {
    "color": "blue",
    "value": 5
  },
  {
    "color": "blue",
    "value": 6
  },
  {
    "color": "blue",
    "value": 7
  },
  {
    "color": "blue",
    "value": 8
  },
  {
    "color": "blue",
    "value": 9
  },
  {
    "color": "yellow",
    "value": 0
  },
  {
    "color": "yellow",
    "value": 1
  },
  {
    "color": "yellow",
    "value": 2
  },
  {
    "color": "yellow",
    "value": 3
  },
  {
    "color": "yellow",
    "value": 4
  },
  {
    "color": "yellow",
    "value": 5
  },
  {
    "color": "yellow",
    "value": 6
  },
  {
    "color": "yellow",
    "value": 7
  },
  {
    "color": "yellow",
    "value": 8
  },
  {
    "color": "yellow",
    "value": 9
  },
  {
    "color": "yellow",
    "value": 1
  },
  {
    "color": "yellow",
    "value": 2
  },
  {
    "color": "yellow",
    "value": 3
  },
  {
    "color": "yellow",
    "value": 4
  },
  {
    "color": "yellow",
    "value": 5
  },
  {
    "color": "yellow",
    "value": 6
  },
  {
    "color": "yellow",
    "value": 7
  },
  {
    "color": "yellow",
    "value": 8
  },
  {
    "color": "yellow",
    "value": 9
  },
  {
    "color": "red",
    "value": 0
  },
  {
    "color": "red",
    "value": 1
  },
  {
    "color": "red",
    "value": 2
  },
  {
    "color": "red",
    "value": 3
  },
  {
    "color": "red",
    "value": 4
  },
  {
    "color": "red",
    "value": 5
  },
  {
    "color": "red",
    "value": 6
  },
  {
    "color": "red",
    "value": 7
  },
  {
    "color": "red",
    "value": 8
  },
  {
    "color": "red",
    "value": 9
  },
  {
    "color": "red",
    "value": 1
  },
  {
    "color": "red",
    "value": 2
  },
  {
    "color": "red",
    "value": 3
  },
  {
    "color": "red",
    "value": 4
  },
  {
    "color": "red",
    "value": 5
  },
  {
    "color": "red",
    "value": 6
  },
  {
    "color": "red",
    "value": 7
  },
  {
    "color": "red",
    "value": 8
  },
  {
    "color": "red",
    "value": 9
  },
  {
    "color": "green",
    "value": 0
  },
  {
    "color": "green",
    "value": 1
  },
  {
    "color": "green",
    "value": 2
  },
  {
    "color": "green",
    "value": 3
  },
  {
    "color": "green",
    "value": 4
  },
  {
    "color": "green",
    "value": 5
  },
  {
    "color": "green",
    "value": 6
  },
  {
    "color": "green",
    "value": 7
  },
  {
    "color": "green",
    "value": 8
  },
  {
    "color": "green",
    "value": 9
  },
  {
    "color": "green",
    "value": 1
  },
  {
    "color": "green",
    "value": 2
  },
  {
    "color": "green",
    "value": 3
  },
  {
    "color": "green",
    "value": 4
  },
  {
    "color": "green",
    "value": 5
  },
  {
    "color": "green",
    "value": 6
  },
  {
    "color": "green",
    "value": 7
  },
  {
    "color": "green",
    "value": 8
  },
  {
    "color": "green",
    "value": 9
  },
  {
    "color": "blue",
    "value": "+2"
  },
  {
    "color": "blue",
    "value": "+2"
  },
  {
    "color": "yellow",
    "value": "+2"
  },
  {
    "color": "yellow",
    "value": "+2"
  },
  {
    "color": "red",
    "value": "+2"
  },
  {
    "color": "red",
    "value": "+2"
  },
  {
    "color": "green",
    "value": "+2"
  },
  {
    "color": "green",
    "value": "+2"
  },
  {
    "color": "blue",
    "value": "reverse"
  },
  {
    "color": "blue",
    "value": "reverse"
  },
  {
    "color": "yellow",
    "value": "reverse"
  },
  {
    "color": "yellow",
    "value": "reverse"
  },
  {
    "color": "red",
    "value": "reverse"
  },
  {
    "color": "red",
    "value": "reverse"
  },
  {
    "color": "green",
    "value": "reverse"
  },
  {
    "color": "green",
    "value": "reverse"
  },
  {
    "color": "blue",
    "value": "block"
  },
  {
    "color": "blue",
    "value": "block"
  },
  {
    "color": "yellow",
    "value": "block"
  },
  {
    "color": "yellow",
    "value": "block"
  },
  {
    "color": "red",
    "value": "block"
  },
  {
    "color": "red",
    "value": "block"
  },
  {
    "color": "green",
    "value": "block"
  },
  {
    "color": "green",
    "value": "block"
  },
  {
    "color": "black",
    "value": "joker"
  },
  {
    "color": "black",
    "value": "joker"
  },
  {
    "color": "black",
    "value": "joker"
  },
  {
    "color": "black",
    "value": "joker"
  },
  {
    "color": "black",
    "value": "+4"
  },
  {
    "color": "black",
    "value": "+4"
  },
  {
    "color": "black",
    "value": "+4"
  },
  {
    "color": "black",
    "value": "+4"
  }
]
}
let Player1Deck = { "cards" : [
  ] }
let Player2Deck = { "cards" : [
  ] }
let gameDeck = { "cards" : [
    
  ] }

// ^ les objets json ^ 

let activeCard = JSON.stringify(gameDeck.cards); // stringify le Talon (change l'objet en chaine de caractère)

let distributionButton = document.getElementById("distribution"); // récupère le bouton de distribution 

let playerOnePlay = document.getElementById("playerOnePlay"); // le bouton qui permet au joueur 1 de jouer
let playerTwoPlay = document.getElementById("playerTwoPlay"); // le bouton qui permet au joueur 2 de jouer



document.getElementById("deckLength").innerHTML = CardDeck.cards.length; // le nombre de cartes restantes dans le paquet
document.getElementById("playerOneCardsLength").innerHTML = Player1Deck.cards.length; // nombre de cartes du joueur 1
document.getElementById("playerTwoCardsLength").innerHTML = Player2Deck.cards.length; // nombre de cartes du joueur 2
document.getElementById("activeCard").innerHTML = activeCard;  // récupère l'id correspondant au span de la carte active

    




distributionButton.onclick = function distribution() { // fonction de distribution des cartes

     console.log("ok")
   
     Player1Deck.cards.push(CardDeck.cards.splice(Math.floor(Math.random()*CardDeck.cards.length), 1)); /* on push dans le deck du joueur 1 la valeur splice trouvée aléatoirement grâce à math.random */
     Player2Deck.cards.push(CardDeck.cards.splice(Math.floor(Math.random()*CardDeck.cards.length), 1)); /* on push dans le deck du joueur 2 la valeur splice trouvée aléatoirement grâce à math.random */
    
    let playerOneCards = JSON.stringify(Player1Deck.cards); // stringify convertie la valeur en chaine de caractère
    let playerTwoCards = JSON.stringify(Player2Deck.cards);  // stringify convertie la valeur en chaine de caractère
     console.log("okok")
    if (Player1Deck.cards.length === 7) { /*si le deck du joueur 1 arrive à 7, la distribution s'arrête et le bouton distribuer disparaît (à ce moment là les deux joueurs ont 7 cartes)*/
                  
               document.getElementById("distribution").style.visibility = "hidden"; // le bouton de distribution est caché
                
              } else {
                  
              }
    
    document.getElementById("playerOneCardsLength").innerHTML = Player1Deck.cards.length;  // les valeurs sont actualisées
    document.getElementById("playerTwoCardsLength").innerHTML = Player2Deck.cards.length;
    document.getElementById("deckLength").innerHTML = CardDeck.cards.length;
    document.getElementById("playerOneCards").innerHTML = playerOneCards;
    document.getElementById("playerTwoCards").innerHTML = playerTwoCards;
    
   
}



playerOnePlay.onclick = function playerOnePlay() {
       let playerOneCards = JSON.stringify(Player1Deck.cards); // stringify convertie la valeur en chaine de caractère
    let playerTwoCards = JSON.stringify(Player2Deck.cards);  // stringify convertie la valeur en chaine de caractère

     let cardSelect = prompt("Quelle carte choisissez vous ?");  /*on demande au joueur quelle carte il choisit pour pouvoir récupérer l'index de la valeur et ainsi sélectionner facilement l'objet */
     
    if (gameDeck.cards.length === 0) {
     gameDeck.cards.push(Player1Deck.cards.splice(cardSelect-1, 1)); /*On push dans le talon la valeur séléctionée par signe-1, (j'utilise le -1 pour que le joueur n'ai pas à prendre en compte que l'index est compté à partir de 0*/
     let playerOneCards = JSON.stringify(Player1Deck.cards); // stringify pour actualiser les valeurs 
     let activeCard = JSON.stringify(gameDeck.cards); // stringify pour actualiser les valeurs 
     document.getElementById("playerOneCardsLength").innerHTML = Player1Deck.cards.length; //  actualiser les valeurs 
     document.getElementById("playerOneCards").innerHTML = playerOneCards; // stringify pour actualiser les valeurs 
     document.getElementById("activeCard").innerHTML = activeCard; // stringify pour actualiser les valeurs 
        } else if(gameDeck.cards[0].color = Player1Deck.cards[cardSelect-1].color){
          console.log("ça marche!")
        } else {
            console.log('ça ne marche pas....')
        }
}


playerTwoPlay.onclick = function playerTwoPlay() {
       

     let cardSelect = prompt("Quelle carte choisissez vous ?");  /*on demande au joueur quelle carte il choisit pour pouvoir récupérer l'index de la valeur et ainsi sélectionner facilement l'objet */
     gameDeck.cards.push(Player2Deck.cards.splice(cardSelect-1, 1)); /*On push dans le talon la valeur séléctionée par signe-1, (j'utilise le -1 pour que le joueur n'ai pas à prendre en compte que l'index est compté à partir de 0*/
     let playerTwoCards = JSON.stringify(Player2Deck.cards); // stringify pour actualiser les valeurs 
     let activeCard = JSON.stringify(gameDeck.cards); // stringify pour actualiser les valeurs 
     document.getElementById("playerTwoCardsLength").innerHTML = Player2Deck.cards.length; //  actualiser les valeurs 
     document.getElementById("playerTwoCards").innerHTML = playerTwoCards; // stringify pour actualiser les valeurs 
     document.getElementById("activeCard").innerHTML = activeCard; // stringify pour actualiser les valeurs 
}

